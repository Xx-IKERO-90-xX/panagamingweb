{%extends '/paginas/chat/base.jinja'%}

{%block title %} Mis Contactos {%endblock%}

{%block content%}
<script type="module" src="/static/scripts/users/contacts.js"></script>
<div style="height: 100vh;" class="container flex h-full flex-col p-4 bg-base-300">
    <br>
    <div class="text-center bg-base-100 shadow-sm p-2 rounded-lg">
        <button class="btn btn-success m-1" id="friendships-btn"><strong>Amistades</strong></button>
        <button class="btn btn-success m-1" id="requests-btn"><strong>Solicitudes</strong></button>
    </div>
    <div id="content">

    </div>
</div>

<template id="frinships-template">
    <div id="friendships-content" class="overflow-x-auto">
        <table class="table">
            <thead>
                <tr>
                    <th></th>
                    <th></th>
                    <th></th>
                    <th></th>
                </tr>
            </thead>
            <tbody>
                {%for friendship, user in friendships%}
                <tr>
                    <td>
                        <div class="flex items-center gap-3">
                            <div class="avatar">
                                <div class="mask mask-squircle h-12 w-12">
                                    {%if user.image != None%}
                                    <img src="/static/uploads/{{user.image}}" alt="Avatar">
                                    {%else%}
                                    <img src="/static/img/userlog.jpg" alt="Avatar">
                                    {%endif%}
                                </div>
                            </div>
                            <div>
                            </div>
                        </div>
                    </td>
                    <td>
                        {{user.username}}
                    </td>
                    <td>
                        <a type="button" href="#" class="btn btn-circle">
                            <svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="30" height="30"
                                viewBox="0,0,256,256">
                                <g fill="#ffffff" fill-rule="nonzero" stroke="none" stroke-width="1"
                                    stroke-linecap="butt" stroke-linejoin="miter" stroke-miterlimit="10"
                                    stroke-dasharray="" stroke-dashoffset="0" font-family="none" font-weight="none"
                                    font-size="none" text-anchor="none" style="mix-blend-mode: normal">
                                    <g transform="scale(5.12,5.12)">
                                        <path
                                            d="M25,4.0625c-12.58594,0 -22.9375,8.86328 -22.9375,19.9375c0,6.42578 3.5625,12.09375 8.9375,15.71875c-0.00781,0.21484 0,0.54688 -0.28125,1.59375c-0.34766,1.29297 -1.03516,3.125 -2.46875,5.15625l-1.03125,1.4375l1.78125,0.03125c6.17578,0.02734 9.75391,-4.03125 10.3125,-4.6875c1.82422,0.40625 3.72266,0.6875 5.6875,0.6875c12.58203,0 22.9375,-8.86328 22.9375,-19.9375c0,-11.07422 -10.35547,-19.9375 -22.9375,-19.9375zM25,5.9375c11.71484,0 21.0625,8.15234 21.0625,18.0625c0,9.91016 -9.34766,18.0625 -21.0625,18.0625c-2.00391,0 -3.94922,-0.24219 -5.78125,-0.6875l-0.5625,-0.125l-0.375,0.46875c0,0 -2.89062,3.25781 -7.5,4.03125c0.83203,-1.49219 1.46484,-2.87891 1.75,-3.9375c0.39844,-1.48047 0.40625,-2.5 0.40625,-2.5v-0.5l-0.4375,-0.28125c-5.22656,-3.3125 -8.5625,-8.58984 -8.5625,-14.53125c0,-9.91016 9.34375,-18.0625 21.0625,-18.0625z">
                                        </path>
                                    </g>
                                </g>
                            </svg>
                        </a>
                    </td>
                    <th>
                    </th>
                </tr>
                {%endfor%}
            </tbody>
        </table>
    </div>
</template>

<template id="friendship-pending-template">
    <div id="friendship-pending-request" class="overflow-x-auto" style="height: 500px;">
        <div class="overflow-x-auto">
            <table class="table">
                <thead>
                    <tr>
                        <th></th>
                        <th></th>
                        <th></th>
                        <th></th>
                    </tr>
                </thead>
                <tbody>
                    <!-- row 1 -->
                    {%for friendship, user in friendships_pending%}
                    <tr>
                        <td>
                            <div class="flex items-center gap-3">
                                <div class="avatar">
                                    <div class="mask mask-squircle h-12 w-12">
                                        {%if user.image != None%}
                                        <img src="/static/uploads/{{user.image}}" alt="Avatar">
                                        {%else%}
                                        <img src="/static/img/userlog.jpg" alt="Avatar">
                                        {%endif%}
                                    </div>
                                </div>
                                <div>
                                </div>
                            </div>
                        </td>
                        <td>
                            {{user.username}}
                        </td>
                        <td></td>
                        <th>
                            <a type="button" href="{{url_for('usuario.accept_friendship_request', id=friendship.id)}}"
                                class="btn btn-xs btn-success">Aceptar</a>
                            <a type="button" href="#" class="btn btn-xs btn-error">Rechazar</a>
                        </th>
                    </tr>
                    {%endfor%}
                </tbody>
            </table>
        </div>
    </div>
</template>

<script type="module" src="/static/scripts/users/contacts.js"></script>
{%endblock%}